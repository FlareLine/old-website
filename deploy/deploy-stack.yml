---
- name: Deploy to AWS
  hosts: localhost
  vars:
    domain_name: "{{ lookup('env', 'DOMAIN_NAME') }}"
  tasks:
    - name: Ensure bucket | static S3
      s3_bucket:
        name: "{{ domain_name }}_static"
        state: present
    - name: Sync objects | static S3
      community.aws.s3_sync:
        bucket: "{{ domain_name }}_static"
        file_change_strategy: checksum
        file_root: ../dist
